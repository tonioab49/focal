(()=>{var e={};e.id=164,e.ids=[164],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},2048:e=>{"use strict";e.exports=require("fs")},7718:e=>{"use strict";e.exports=require("node:child_process")},6005:e=>{"use strict";e.exports=require("node:crypto")},7561:e=>{"use strict";e.exports=require("node:fs")},9411:e=>{"use strict";e.exports=require("node:path")},9430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(3933),s(9097),s(5866);var r=s(3191),a=s(8716),l=s(7922),o=s.n(l),n=s(5231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(t,i);let d=["",{children:["task",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3933)),"/Users/antoine/src/focal/src/app/task/[...id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9097)),"/Users/antoine/src/focal/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/antoine/src/focal/src/app/task/[...id]/page.tsx"],u="/task/[...id]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/task/[...id]/page",pathname:"/task/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9337:(e,t,s)=>{Promise.resolve().then(s.bind(s,4887))},4887:(e,t,s)=>{"use strict";s.d(t,{TaskEditForm:()=>y});var r=s(326),a=s(7577),l=s(5047),o=s(434),n=s(9476),i=s(9049),d=s(4884),c=s(6019),u=s(1601),m=s(7591),x=s(7001),p=s(8033),g=s(8176),b=s(1063);let h=[{value:"todo",label:"To Do"},{value:"in-progress",label:"In Progress"},{value:"done",label:"Done"}],f=[{value:"",label:"None"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}];function y({task:e}){let t=(0,l.useRouter)(),[s,y]=(0,a.useTransition)(),[v,j]=(0,a.useState)(e.title),[k,N]=(0,a.useState)(e.status),[w,P]=(0,a.useState)(e.priority??""),[_,C]=(0,a.useState)(e.assignee??""),[S,F]=(0,a.useState)(null),[q,E]=(0,a.useState)(!1),{provider:M,ydocRef:T,connectedUsers:U,user:A,broadcastSave:$}=(0,x.C)(`task:${e.filePath}`,{onSaveBroadcast:()=>E(!1)}),D=(0,m.n)(),G=(0,a.useMemo)(()=>M&&T.current?[...(0,u.y)({collaboration:!0}),i.ZP.configure({document:T.current}),d.Z.configure({provider:M,user:A,render:e=>{let t=document.createElement("span");t.classList.add("collaboration-carets__caret"),t.style.borderColor=e.color;let s=document.createElement("div");return s.classList.add("collaboration-carets__label"),s.style.backgroundColor=e.color,s.textContent=e.id===A.id?"Me":e.name,t.append(s),t}})]:null,[M,A,T]),L=(0,n.jE)({extensions:G??(0,u.y)(),editable:!0,immediatelyRender:!1,editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[200px]"}},onUpdate:({transaction:e})=>{e.getMeta("y-sync$")||E(!0)}},[G]),H=(0,a.useCallback)(()=>{F(null),y(async()=>{try{let s;if(L&&q){let e=L.getHTML();s=c.O.turndown(e)}await (0,p.F9)({filePath:e.filePath,title:v,status:k,priority:w,assignee:_,body:s}),E(!1),$(),t.push("/")}catch{F("Failed to save task")}})},[e.filePath,v,k,w,_,L,q,t,$]),R=(0,a.useCallback)(()=>{t.push("/")},[t]);return(0,g.a)((0,a.useMemo)(()=>[{key:"s",meta:!0,handler:H,global:!0},{key:"Escape",handler:R,global:!0}],[H,R])),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center gap-3",children:[r.jsx(o.default,{href:"/",className:"text-sm text-gray-500 hover:text-gray-900 transition-colors",children:"← Back"}),U.length>0&&r.jsx("div",{className:"flex items-center gap-1.5 ml-auto",children:r.jsx("div",{className:"flex -space-x-1.5",children:U.slice(0,5).map((e,t)=>r.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full border-2 border-white text-[10px] font-semibold text-white",style:{backgroundColor:e.color},title:e.displayName,children:e.displayName.charAt(0)},t))})}),(0,r.jsxs)("span",{className:`flex items-center gap-2 text-xs text-gray-400 ${0===U.length?"ml-auto":""}`,children:[r.jsx("kbd",{className:"rounded border border-gray-300 bg-gray-100 px-1.5 py-0.5 font-mono text-[10px] text-gray-500",children:"Esc"}),r.jsx("span",{children:"back"}),r.jsx("kbd",{className:"ml-2 rounded border border-gray-300 bg-gray-100 px-1.5 py-0.5 font-mono text-[10px] text-gray-500",children:"⌘S"}),r.jsx("span",{children:"save"})]})]}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),r.jsx("input",{id:"title",type:"text",value:v,onChange:e=>j(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsx("select",{id:"status",value:k,onChange:e=>N(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:h.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),r.jsx("select",{id:"priority",value:w,onChange:e=>P(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:f.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"assignee",className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignee"}),r.jsx("input",{id:"assignee",type:"text",value:_,onChange:e=>C(e.target.value),placeholder:"e.g. alice@example.com",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),L&&r.jsx(b.g,{editor:L,className:"mb-0 rounded-t-md border border-b-0 border-gray-300 bg-gray-50 px-2 py-1.5"}),r.jsx("div",{className:"rounded-b-md border border-gray-300 px-3 py-2",onClickCapture:D,children:r.jsx(n.kg,{editor:L})})]}),(0,r.jsxs)("div",{className:"rounded-md bg-gray-50 border border-gray-200 px-3 py-2",children:[r.jsx("span",{className:"text-xs font-medium text-gray-500",children:"File"}),r.jsx("p",{className:"text-sm text-gray-700 font-mono mt-0.5 break-all",children:e.filePath})]}),S&&r.jsx("p",{className:"text-sm text-red-600",children:S}),(0,r.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[r.jsx("button",{onClick:H,disabled:s,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50",children:s?"Saving...":"Save"}),r.jsx(o.default,{href:"/",className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})}},3933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,dynamic:()=>n});var r=s(9510),a=s(8583),l=s(8585);let o=(0,s(8570).createProxy)(String.raw`/Users/antoine/src/focal/src/app/task/[...id]/TaskEditForm.tsx#TaskEditForm`),n="force-dynamic";function i({params:e}){let t=e.id.join("/"),s=(0,a.U)().find(e=>e.id===t);return s||(0,l.notFound)(),r.jsx("div",{className:"h-full p-6",children:r.jsx("div",{className:"mx-auto max-w-[750px]",children:r.jsx(o,{task:s})})})}},8583:(e,t,s)=>{"use strict";s.d(t,{U:()=>m});var r=s(7561),a=s.n(r),l=s(9411),o=s.n(l),n=s(3673),i=s.n(n),d=s(8154);let c=["todo","in-progress","done"],u=["low","medium","high","urgent"];function m(e){let t=(0,d.HA)(),s=[];for(let r of t){if(e&&r.name!==e)continue;let t=o().join(r.path,".focal","tasks");if(a().existsSync(t))for(let e of function(e){let t=[];return function e(s){let r;try{r=a().readdirSync(s,{withFileTypes:!0})}catch{return}for(let a of r){let r=o().join(s,a.name);a.isDirectory()&&!a.name.startsWith(".")?e(r):a.isFile()&&a.name.endsWith(".mdx")&&t.push(r)}}(e),t}(t)){let t=function(e,t){let s=a().readFileSync(e,"utf-8"),{data:r,content:l}=i()(s);if(!r.title||!r.status||!c.includes(r.status))return null;let n=o().basename(e,".mdx");return{id:`${t}/${n}`,title:r.title,status:r.status,priority:u.includes(r.priority)?r.priority:void 0,assignee:"string"==typeof r.assignee?r.assignee:void 0,repository:t,filePath:e,body:l.trim()}}(e,r.name);t&&s.push(t)}}return s}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[161,736,652,113],()=>s(9430));module.exports=r})();