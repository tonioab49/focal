(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2262:function(e,t,s){Promise.resolve().then(s.t.bind(s,2778,23)),Promise.resolve().then(s.bind(s,247)),Promise.resolve().then(s.bind(s,7576))},5064:function(e,t,s){"use strict";s.d(t,{F9:function(){return n},MF:function(){return c},VA:function(){return r},dj:function(){return l},do:function(){return o},vr:function(){return i}}),s(3079);var a=s(2119),r=(0,a.$)("4810e0847edab22d875d1f15f89918103c558ebd"),l=(0,a.$)("29d9cd11d097fcb6690a26ef774aeeee260b389b");(0,a.$)("bfa1de4d25904e288eea8780fb8c48c13f8304d2"),(0,a.$)("ac8031647eec6a4700a6a90d39c2af1c1d5bd267");var n=(0,a.$)("0b32d0e7a9e913867bfb2724e5c71bc874ca9624"),c=(0,a.$)("d36e843f1a3e9ed7e591d8cb5f8779c3f4ad0876");(0,a.$)("48e24bf6b7790941829c1b47555db59c45439f76"),(0,a.$)("5896e2c5181e1accf5bdf86f55c5717bc2bfa048");var i=(0,a.$)("5171b9bc6fa8d6fb730de54219624f90f34cbafd"),o=(0,a.$)("f53de7a8283b631e23b5e166f5d38eeac215e2cd")},247:function(e,t,s){"use strict";s.d(t,{AppShell:function(){return h}});var a=s(7437),r=s(2265),l=s(9376),n=s(7648),c=s(4887),i=s(5064),o=s(1683);function d(e){let{gitStatus:t,selectedRepo:s}=e,n=(0,l.useRouter)(),[d,m]=(0,r.useState)(!1),[u,x]=(0,r.useTransition)(),[b,h]=(0,r.useState)(null),f=t.files.length,g=f>0;(0,r.useEffect)(()=>{d||h(null)},[d]);let y=(0,r.useCallback)(()=>{u||t.localMode||x(async()=>{h((await (0,i.VA)(s)).message),n.refresh()})},[u,t.localMode,s,n]);return(0,o.a)((0,r.useMemo)(()=>[{key:"Enter",ctrl:!0,handler:y,global:!0}],[y])),(0,r.useEffect)(()=>{if(!d)return;let e=e=>{"Escape"===e.key&&m(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>g&&m(!0),className:"flex items-center gap-1.5 rounded-md px-2 py-1 text-xs transition-colors ".concat(g?"text-amber-700 hover:bg-amber-50 cursor-pointer":"text-gray-400 cursor-default"),title:g?"".concat(f," uncommitted"):"No changes to commit",children:[(0,a.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(g?"bg-amber-500":"bg-gray-300")}),(0,a.jsx)("span",{children:g?"".concat(f," uncommitted"):"No changes"})]}),d&&(0,c.createPortal)((0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>m(!1)}),(0,a.jsxs)("div",{className:"relative rounded-lg border border-gray-200 bg-white shadow-xl w-full max-w-md mx-4 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Uncommitted changes"}),(0,a.jsx)("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 text-sm",children:"Esc"})]}),(0,a.jsx)("ul",{className:"space-y-2 max-h-64 overflow-y-auto mb-4",children:t.files.map(e=>(0,a.jsxs)("li",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900 truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-400 truncate",children:e.path})]}),(0,a.jsx)("span",{className:"mt-0.5 shrink-0 rounded px-1.5 py-0.5 text-[10px] font-medium ".concat("new"===e.status?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"),children:e.status})]},e.path))}),b&&(0,a.jsx)("p",{className:"mb-3 text-sm text-gray-700",children:b}),t.localMode?(0,a.jsx)("p",{className:"text-xs text-gray-500 italic",children:"In local mode, commit from your terminal to avoid conflicts with your working tree."}):(0,a.jsx)("button",{onClick:y,disabled:u||!!b,className:"w-full rounded-md bg-amber-600 px-3 py-2 text-sm font-medium text-white hover:bg-amber-700 transition-colors disabled:opacity-50 inline-flex items-center justify-center gap-2",children:u?"Committing...":b||(0,a.jsxs)(a.Fragment,{children:["Commit & Push",(0,a.jsx)("kbd",{className:"rounded border border-amber-400 bg-amber-500 px-1 py-0.5 font-mono text-[10px] text-amber-100",children:"^↵"})]})})]})]}),document.body)]})}function m(e){let{repos:t,selectedRepo:s,localMode:n}=e,c=(0,l.useRouter)(),[o,d]=(0,r.useTransition)();return n||t.length<=1?(0,a.jsx)("span",{className:"text-xs text-gray-500",children:n?"viewing local repository":s}):(0,a.jsx)("select",{value:s,onChange:function(e){let t=e.target.value;d(async()=>{await (0,i.dj)(t),c.refresh()})},disabled:o,className:"rounded-md border border-gray-200 bg-white px-2 py-1 text-xs text-gray-700 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:opacity-50",children:t.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})}function u(e){let{open:t,onClose:s,docTree:r,gitStatus:c,repos:i,selectedRepo:o,onNewDoc:u}=e,b=(0,l.usePathname)();return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 z-30 bg-black/40 md:hidden",onClick:s}),(0,a.jsxs)("aside",{className:"fixed left-0 top-0 z-40 h-full w-64 transform border-r border-gray-200 bg-white transition-transform duration-200 ease-in-out md:static md:translate-x-0 ".concat(t?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"flex h-14 items-center border-b border-gray-200 px-4",children:[(0,a.jsx)(n.default,{href:"/",className:"text-lg font-semibold text-gray-900",children:"Focal"}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)(m,{repos:i,selectedRepo:o,localMode:c.localMode})})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 px-4 py-2",children:(0,a.jsx)(d,{gitStatus:c,selectedRepo:o})}),(0,a.jsxs)("nav",{className:"h-[calc(100%-3.5rem-2.5rem)] overflow-y-auto p-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center px-3",children:(0,a.jsx)("h3",{className:"text-xs font-medium uppercase tracking-wide text-gray-400",children:"Tasks"})}),(0,a.jsx)("ul",{className:"mt-1 space-y-0.5",children:(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/",onClick:s,className:"block rounded-md px-3 py-1 text-sm transition-colors ".concat("/"===b||b.startsWith("/task")?"bg-gray-100 text-gray-900 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:"Kanban View"})})})]}),(0,a.jsxs)("div",{className:"mt-4 border-t border-gray-200 pt-3",children:[(0,a.jsx)("div",{className:"flex items-center px-3",children:(0,a.jsx)("h3",{className:"text-xs font-medium uppercase tracking-wide text-gray-400",children:"Documentation"})}),0===r.length?(0,a.jsx)("p",{className:"mt-1 px-3 text-xs text-gray-400 italic",children:"No docs found"}):(0,a.jsx)("ul",{className:"mt-1 space-y-0",children:(0,a.jsx)(x,{nodes:r,pathname:b,onClose:s,depth:0,onNewDoc:u})})]})]})]})]})}function x(e){let{nodes:t,pathname:s,onClose:r,depth:l,onNewDoc:c}=e;return(0,a.jsx)(a.Fragment,{children:t.map(e=>{let t="/docs/".concat(e.slug),i=s===t,o=e.children&&e.children.length>0,d="".concat(12+10*l,"px");return(0,a.jsx)("li",{children:o?(0,a.jsxs)("div",{className:"group",children:[(0,a.jsxs)("div",{className:"flex items-center",style:{paddingLeft:d},children:[(0,a.jsx)("span",{className:"flex-1 truncate rounded-md py-1 text-[11px] font-semibold uppercase tracking-wide text-gray-700",children:e.title}),(0,a.jsx)("button",{onClick:()=>c(e.filePath),className:"invisible group-hover:visible mr-1 rounded px-1 py-0.5 text-xs text-gray-400 hover:bg-gray-100 hover:text-gray-700",title:"New doc here",children:"+"})]}),(0,a.jsx)("ul",{className:"space-y-0",children:(0,a.jsx)(x,{nodes:e.children,pathname:s,onClose:r,depth:l+1,onNewDoc:c})})]}):(0,a.jsx)(n.default,{href:t,onClick:r,className:"block truncate rounded-md py-1 text-sm transition-colors ".concat(i?"bg-gray-100 text-gray-900 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),style:{paddingLeft:d},children:e.title})},e.slug)})})}var b=s(1492);function h(e){let{children:t,docTree:s,gitStatus:n,repos:c,selectedRepo:i}=e,[x,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[y,p]=(0,r.useState)(void 0),[j,v]=(0,r.useState)(!1),N=(0,l.usePathname)(),k=(0,r.useCallback)(()=>h(e=>!e),[]),w=(0,r.useCallback)(()=>h(!1),[]),C=(0,r.useCallback)(()=>{g(N.startsWith("/docs")?"doc":"task")},[N]);(0,o.a)((0,r.useMemo)(()=>[{key:"[",handler:k},{key:"n",handler:C}],[k,C])),(0,r.useCallback)(()=>g("task"),[]);let E=(0,r.useCallback)(e=>{p(e),g("doc")},[]),M=(0,r.useCallback)(()=>{g(null),p(void 0)},[]);return(0,r.useEffect)(()=>{v("focal.ablg.io"===window.location.hostname)},[]),(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[j&&(0,a.jsxs)("div",{className:"border-b border-amber-200 bg-amber-50 px-4 py-2 text-center text-sm text-amber-900",children:["This is Focal running against its own"," ",(0,a.jsx)("a",{href:"https://github.com/tonioab49/focal",target:"_blank",rel:"noreferrer",className:"underline underline-offset-2 hover:text-amber-950",children:"Github repo"}),". Feel free to report bugs and create tasks directly from here."]}),(0,a.jsxs)("div",{className:"flex min-h-0 flex-1",children:[(0,a.jsx)(u,{open:x,onClose:w,docTree:s,gitStatus:n,repos:c,selectedRepo:i,onNewDoc:E}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,a.jsxs)("header",{className:"flex h-14 items-center border-b border-gray-200 px-4 md:hidden",children:[(0,a.jsx)("button",{onClick:k,className:"rounded-md p-2 text-gray-600 hover:bg-gray-100 hover:text-gray-900","aria-label":"Toggle sidebar",children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,a.jsxs)("div",{className:"ml-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Focal"}),c.length>1&&(0,a.jsx)(m,{repos:c,selectedRepo:i,localMode:n.localMode})]}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)(d,{gitStatus:n,selectedRepo:i})})]}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:t})]})]}),null!==f&&(0,a.jsx)(b.r,{type:f,repoName:i,parentDir:y,onClose:M})]})}},1492:function(e,t,s){"use strict";s.d(t,{r:function(){return i}});var a=s(7437),r=s(2265),l=s(9376),n=s(1683),c=s(5064);function i(e){let{type:t,repoName:s,parentDir:i,onClose:o}=e,d=(0,l.useRouter)(),[m,u]=(0,r.useState)(""),[x,b]=(0,r.useTransition)(),h=(0,r.useCallback)(()=>o(),[o]);return(0,n.a)((0,r.useMemo)(()=>[{key:"Escape",global:!0,handler:h}],[h])),(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:o}),(0,a.jsxs)("div",{className:"relative rounded-lg border border-gray-200 bg-white shadow-xl w-full max-w-md mx-4 p-5",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-4",children:"task"===t?"New task":"New document"}),(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m.trim()&&!x&&b(async()=>{if("task"===t){let{taskId:e}=await (0,c.vr)({title:m.trim(),repoName:s});d.push("/task/".concat(e))}else{let{slug:e}=await (0,c.do)({title:m.trim(),repoName:s,parentDir:i});d.push("/docs/".concat(e))}o()})},children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"Title",autoFocus:!0,disabled:x,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500 disabled:opacity-50"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:o,disabled:x,className:"rounded-md px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:!m.trim()||x,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50",children:x?"Creating…":"Create"})]})]})]})]})}},7576:function(e,t,s){"use strict";s.d(t,{ShortcutHelp:function(){return c}});var a=s(7437),r=s(2265),l=s(1683);let n=[{title:"Board",shortcuts:[{keys:["N"],label:"New task"},{keys:["J","↓"],label:"Move down"},{keys:["K","↑"],label:"Move up"},{keys:["H","←"],label:"Move left"},{keys:["L","→"],label:"Move right"},{keys:["↵"],label:"Open task"},{keys:["Esc"],label:"Clear selection"}]},{title:"Task Edit",shortcuts:[{keys:["⌘S"],label:"Save task"},{keys:["Esc"],label:"Back to board"}]},{title:"Docs",shortcuts:[{keys:["N"],label:"New document"},{keys:["E"],label:"Edit document"},{keys:["⌘S"],label:"Save document"},{keys:["Esc"],label:"Cancel editing"}]},{title:"Global",shortcuts:[{keys:["["],label:"Toggle sidebar"},{keys:["Ctrl+↵"],label:"Commit changes"},{keys:["?"],label:"Toggle this help"}]}];function c(){let[e,t]=(0,r.useState)(!1),s=(0,r.useCallback)(()=>t(e=>!e),[]);return((0,l.a)((0,r.useMemo)(()=>[{key:"?",shift:!0,handler:s}],[s])),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>t(!1)}),(0,a.jsxs)("div",{className:"relative rounded-lg border border-gray-200 bg-white shadow-xl w-full max-w-md mx-4 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Keyboard shortcuts"}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 text-sm",children:"Esc"})]}),(0,a.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:e.title}),(0,a.jsx)("div",{className:"space-y-1.5",children:e.shortcuts.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.label}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:e.keys.map(e=>(0,a.jsx)("kbd",{className:"inline-flex min-w-[22px] items-center justify-center rounded border border-gray-300 bg-gray-50 px-1.5 py-0.5 font-mono text-xs text-gray-600",children:e},e))})]},e.label))})]},e.title))})]})]}):null}},1683:function(e,t,s){"use strict";s.d(t,{a:function(){return r}});var a=s(2265);function r(e){(0,a.useEffect)(()=>{function t(t){let s=t.target,a="INPUT"===s.tagName||"TEXTAREA"===s.tagName||"SELECT"===s.tagName||s.isContentEditable;for(let s of e)if(s.key===t.key&&(!s.meta||t.metaKey)&&(!s.ctrl||t.ctrlKey)&&(!s.shift||t.shiftKey)&&(s.meta||!t.metaKey)&&(s.ctrl||!t.ctrlKey)&&(!a||s.global)){t.preventDefault(),s.handler(t);return}}return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e])}},2778:function(){}},function(e){e.O(0,[461,219,971,117,744],function(){return e(e.s=2262)}),_N_E=e.O()}]);