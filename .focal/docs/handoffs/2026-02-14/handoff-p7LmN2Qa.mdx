# Goal

- Configure Prettier with standard Next.js + TypeScript defaults.
- Enforce formatting/linting on commit via a pre-commit hook.

# Context / assumptions

- Request focused on setup/enforcement, not mass reformatting existing files.
- Repo uses Yarn v1 and already has ESLint (`next lint`) configured.
- Husky was not previously initialized in this repo.
- Existing codebase has many files not yet formatted with Prettier defaults.
- `core.hooksPath` update required writing to `.git/config`; this needed elevated execution in this environment.
- UNKNOWN: whether the team wants strict full-repo format compliance immediately vs incremental compliance on touched files.
- UNKNOWN: whether CI will later enforce `format:check` and `typecheck` (no in-repo CI workflow present at time of work).

# Decisions made

- Added `prettier`, `lint-staged`, and `husky` as dev dependencies.
- Added scripts to `package.json` for repeatable checks:
- `format`, `format:check`, `typecheck`, `lint:fix`, and `prepare` (`husky`).
- Added `lint-staged` config in `package.json` to run:
- Prettier on staged text/code/docs files.
- ESLint `--fix --max-warnings=0` on staged JS/TS files.
- Initialized Husky and set `core.hooksPath` to `.husky/_`.
- Replaced default Husky pre-commit command with `yarn lint-staged`.
- Added `.prettierrc.json` with common defaults (`semi`, `trailingComma: all`, `printWidth: 100`, etc.).
- Added `.prettierignore` to avoid generated/vendor paths and keep handoff notes untouched.
- Chose incremental enforcement model (staged files only) to avoid disruptive whole-repo reformat in this pass.

# Artifacts

- Files touched:
- `package.json` (scripts + `lint-staged` config + dev deps)
- `yarn.lock` (dependency resolution updates)
- `.prettierrc.json` (new)
- `.prettierignore` (new)
- `.husky/pre-commit` (new; runs `yarn lint-staged`)
- `.husky/_/*` (generated by Husky init)
- Verification commands run:
- `yarn lint` => PASS
- `yarn lint-staged --allow-empty` => PASS (no staged files)
- `yarn format:check` => FAIL on many existing files (baseline pre-existing formatting drift)
- Minimal diff summary:
- Added Prettier + pre-commit enforcement plumbing without reformatting repository contents.

# If we resume

- Start by deciding if you want one-time repo-wide formatting (`yarn format`) now or keep incremental-only enforcement.
- If full formatting is desired, run `yarn format`, inspect diff size, and commit as a dedicated formatting commit.
- Add CI checks for `yarn lint`, `yarn typecheck`, and `yarn format:check` to enforce standards on PRs.
- Optionally split `lint-staged` patterns further if commit-time performance needs tuning.
