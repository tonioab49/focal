- Goal (1–2 lines)
- Investigate why an existing subfolder under `.focal/docs` does not appear in sidebar in local mode.
- Fix docs discovery logic so nested folders containing doc files are rendered.

- Context / assumptions (bullets)
- User reported missing subfolder while testing local mode.
- Local filesystem currently contains `.focal/docs/handoffs/2026-02-13/handoff-k3Pq9Lm2.mdx`.
- Sidebar tree data is produced from `src/lib/docs.ts` via `loadDocTree()` and recursive `scanDocsDir()`.

- Decisions made (bullets)
- Expanded supported documentation file extensions from only `.md` to both `.md` and `.mdx`.
- Kept slug generation extension-agnostic by stripping either extension before building doc slug.
- No UI-layer changes were needed for this issue; folder rendering already works when children are present.

- What we tried (bullets)
- Inspected docs tree logic in `src/lib/docs.ts`.
- Confirmed folder omission cause: `scanDocsDir()` ignored `.mdx`, so folders containing only `.mdx` resolved to empty children and were dropped.
- Patched loader with `isDocFile()` + `stripDocExtension()` helpers.
- Ran targeted tests: `yarn -s vitest run src/lib/__tests__/local-mode.test.ts`.

- Current state (what works / what’s broken)
- Works:
- `.mdx` docs are now included in docs tree traversal.
- Subfolders that only contain `.mdx` docs (e.g. `handoffs/2026-02-13`) are now eligible to appear in sidebar.
- Existing local-mode tests pass (18/18).
- Broken/known issues:
- Pre-existing typecheck issue remains outside this change: `src/components/AppShell.tsx:69` (`RepoSelector` missing required `localMode` prop).

- Open questions / unknowns
- UNKNOWN: whether docs index ordering should explicitly prioritize `index.mdx` the same way as `index.md` (current sorting rule `index.*` already does this implicitly).
- UNKNOWN: whether docs editor/save flow should treat `.mdx` differently in future (currently plain markdown serialization is used for both).

- Next steps (ranked, with concrete commands or file paths)
- 1. Run app and verify sidebar now shows `handoffs/2026-02-13` in Documentation tree: `yarn dev`.
- 2. If needed, add dedicated unit tests for docs scanning extension support in `src/lib/__tests__/`.
- 3. Separately fix unrelated typecheck blocker in `src/components/AppShell.tsx:69`.

- Artifacts (links/paths: PRs, branches, files touched, docs created)
- Modified: `src/lib/docs.ts`
- Created: `.focal/docs/handoffs/2026-02-13/handoff-a9X2mQ7b.mdx`
- Verified with: `yarn -s vitest run src/lib/__tests__/local-mode.test.ts`

- If we resume: “Start by doing X, then Y” (2–5 bullets)
- Start by loading the app in local mode and opening the Documentation tree.
- Then verify nested `handoffs/2026-02-13` appears and leaf `.mdx` file is clickable.
- Then decide whether to add scanner tests specific to docs extensions.
- Then address the unrelated `RepoSelector` prop typing error.
